<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <title>Backcoin.org | Dashboard</title>

    <link rel="stylesheet" href="./styles/tailwind.css">

    <meta http-equiv="Content-Security-Policy" content="
        default-src * 'unsafe-inline' 'unsafe-eval' data: blob:;
        script-src * 'unsafe-inline' 'unsafe-eval';
        connect-src * 'unsafe-inline';
        img-src * data: blob: 'unsafe-inline';
        frame-src *;
        style-src * 'unsafe-inline';
    ">
    
    <link rel="icon" href="./assets/bkc_logo_3d.png" type="image/png">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" />
    <link rel="stylesheet" href="./styles/tiger-game-styles.css">
    <link rel="stylesheet" href="./styles/trade.css">

    <script src="https://cdn.jsdelivr.net/npm/ethers@6.4.0/dist/ethers.umd.min.js" defer></script>
    <script src="https://pay.coinbase.com/pay-sdk.js" defer></script>
    <script src="https://static.moonpay.com/web-sdk/v1/moonpay-web-sdk.min.js" defer></script>
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap');
        :root {
            --bg-main: #18181b; --bg-sidebar: #27272a; --bg-card: #3f3f46; --border-color: #52525b; --text-primary: #f4f4f5; --text-secondary: #a1a1aa; --accent: #f59e0b; --accent-hover: #d97706;
            
        }
        body { font-family: 'Inter', sans-serif; background-color: var(--bg-main); color: var(--text-primary); }
        .sidebar-link.active { background-color: var(--accent); color: var(--bg-main); font-weight: 600; }
        .btn-disabled { background-color: #3f3f46 !important; color: #71717a !important; cursor: not-allowed !important; }
        .loader { border: 2px solid var(--border-color); border-radius: 50%; border-top: 2px solid var(--accent); width: 20px; height: 20px; animation: spin 1s linear infinite; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        
        /* Utility Classes */
        .form-input { background-color: var(--bg-main); border: 1px solid var(--border-color); border-radius: 0.375rem; padding: 0.75rem 1rem; color: var(--text-primary); width: 100%; transition: border-color 0.2s, box-shadow 0.2s; }
        .form-input:focus { outline: none; border-color: var(--accent); box-shadow: 0 0 0 2px rgba(245, 158, 11, 0.4); }
        .form-input:disabled { background-color: #27272a; cursor: not-allowed; }
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: var(--bg-sidebar); }
        ::-webkit-scrollbar-thumb { background: var(--border-color); border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: var(--bg-card); }
        
        
        /* AirBNFT Styles */
        .rental-card { transition: transform 0.2s; }
        .rental-card:hover { transform: translateY(-5px); }

        /* Dashboard Styles */
        .glass-panel { background: rgba(39, 39, 42, 0.6); backdrop-filter: blur(12px); border: 1px solid rgba(82, 82, 91, 0.5); border-radius: 1rem; padding: 1.5rem; transition: all 0.3s ease; }
        .glass-panel:hover { border-color: rgba(245, 158, 11, 0.3); box-shadow: 0 10px 30px -10px rgba(0, 0, 0, 0.5); }
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }

        /* --- Partners Section Styles (Main Dashboard) --- */
        .partners-section {
            padding: 40px 20px;
            background-color: rgba(15, 18, 24, 0.5);
            text-align: center;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            margin-top: 3rem;
            border-radius: 0.75rem;
            backdrop-filter: blur(5px);
        }

        .partners-title {
            font-size: 0.8rem;
            letter-spacing: 2px;
            text-transform: uppercase;
            color: #71717a;
            margin-bottom: 25px;
            font-weight: 600;
        }

        .partners-grid {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 60px;
            flex-wrap: wrap;
        }

        .partner-card {
            display: flex;
            flex-direction: column;
            align-items: center;
            transition: transform 0.3s ease, opacity 0.3s ease;
            opacity: 0.6;
            cursor: pointer;
        }

        .partner-card:hover {
            transform: translateY(-3px);
            opacity: 1;
        }

        .partner-card.highlight {
            opacity: 0.9;
        }
        .partner-card.highlight:hover {
            opacity: 1;
        }

        .partner-logo {
            height: 40px;
            width: auto;
            object-fit: contain;
            margin-bottom: 10px;
            filter: grayscale(100%);
            transition: filter 0.3s ease;
        }

        .partner-card:hover .partner-logo,
        .partner-card.highlight:hover .partner-logo {
            filter: grayscale(0%);
        }

        .partner-label {
            font-size: 0.75rem;
            color: #d4d4d8;
            opacity: 0.6;
        }
        
        @media (max-width: 768px) {
            .partners-grid {
                gap: 30px;
                flex-direction: column;
            }
            .partner-logo {
                height: 35px;
            }
        }

        /* ESTILOS DO BOTÃO DE CARTEIRA (REPLICADO DE app.js) */
        .wallet-btn {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            padding: 8px 16px;
            border-radius: 12px;
            font-weight: 700;
            font-family: 'Inter', sans-serif;
            transition: all 0.3s ease;
            cursor: pointer;
            min-height: 44px;
            font-size: 14px;
            position: relative;
            overflow: hidden;
        }

        .wallet-btn-disconnected {
            background: linear-gradient(135deg, var(--accent) 0%, var(--accent-hover) 100%);
            color: var(--bg-main);
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 4px 15px rgba(245, 158, 11, 0.3);
        }

        .wallet-btn-disconnected:hover {
            transform: translateY(-1px);
            box-shadow: 0 6px 20px rgba(245, 158, 11, 0.5);
            filter: brightness(1.1);
        }

        .wallet-btn-connected {
            background: rgba(24, 24, 27, 0.8);
            color: var(--text-primary);
            border: 1px solid rgba(63, 63, 70, 0.5);
            backdrop-filter: blur(10px);
        }

        .wallet-btn-connected:hover {
            background: rgba(39, 39, 42, 0.9);
            border-color: rgba(16, 185, 129, 0.5);
        }

        .status-dot {
            width: 8px;
            height: 8px;
            background-color: #10b981;
            border-radius: 50%;
            box-shadow: 0 0 8px #10b981;
            animation: pulse-green 2s infinite;
        }

        .balance-pill {
            background: rgba(0, 0, 0, 0.4);
            border: 1px solid rgba(255, 255, 255, 0.1);
            padding: 4px 10px;
            border-radius: 8px;
            color: #fbbf24;
            font-size: 12px;
            letter-spacing: 0.5px;
            display: flex;
            align-items: center;
        }
        
        @media (max-width: 480px) {
            .balance-pill { display: none; }
            .wallet-btn { padding: 8px 12px; font-size: 12px; }
        }
    </style>
</head>
<body class="antialiased">

    <div id="toast-container" class="fixed bottom-4 right-4 z-[60] flex flex-col gap-2"></div>

    <div class="relative min-h-screen lg:flex">
        <div id="sidebar-backdrop" class="fixed inset-0 bg-black/90 z-30 hidden lg:hidden"></div>

        <aside id="sidebar" class="fixed top-0 left-0 z-40 w-64 h-full bg-sidebar p-4 flex flex-col transition-transform duration-300 ease-in-out -translate-x-full lg:translate-x-0 overflow-y-auto no-scrollbar">
            
            <div class="flex items-center gap-3 px-2 mb-8">
                <img src="./assets/bkc_logo_3d.png" alt="Backcoin.org Logo" class="h-10 w-auto rounded-full">
                <span class="text-2xl font-bold text-amber-400">Backcoin.org</span>
            </div>

            <nav id="nav-links" class="flex flex-col flex-1">
                 <div class="space-y-2">
                    <a data-target="dashboard" class="sidebar-link flex items-center gap-4 py-2.5 px-4 rounded-lg transition-colors active">
                        <i class="fa-solid fa-chart-pie w-5 text-center"></i>
                        <span>Dashboard</span>
                    </a>
                    <a data-target="mine" class="sidebar-link flex items-center gap-4 py-2.5 px-4 rounded-lg transition-colors text-zinc-400 hover:text-white hover:bg-zinc-700">
                        <i class="fa-solid fa-layer-group w-5 text-center"></i>
                        <span>Stake & Earn</span>
                    </a>
                    <a data-target="store" class="sidebar-link flex items-center gap-4 py-2.5 px-4 rounded-lg transition-colors text-zinc-400 hover:text-white hover:bg-zinc-700">
                        <i class="fa-solid fa-store w-5 text-center"></i>
                        <span>NFT Market</span>
                    </a>
                    <a data-target="rental" class="sidebar-link flex items-center gap-4 py-2.5 px-4 rounded-lg transition-colors text-zinc-400 hover:text-white hover:bg-zinc-700">
                        <i class="fa-solid fa-rocket w-5 text-center"></i>
                        <span>Boost Market</span>
                    </a>
                    
                    <a data-target="actions" class="sidebar-link flex items-center gap-4 py-2.5 px-4 rounded-lg transition-colors text-zinc-400 hover:text-white hover:bg-zinc-700">
                        <i class="fa-solid fa-dice w-5 text-center"></i>
                        <span>Fortune Pool</span>
                    </a>
                    <a data-target="charity" class="sidebar-link flex items-center gap-4 py-2.5 px-4 rounded-lg transition-colors text-zinc-400 hover:text-white hover:bg-zinc-700">
                        <i class="fa-solid fa-hand-holding-heart w-5 text-center"></i>
                        <span>Charity Pool</span>
                    </a>
                    <a data-target="backchat" class="sidebar-link flex items-center justify-between gap-4 py-2.5 px-4 rounded-lg transition-colors text-zinc-400 hover:text-white hover:bg-zinc-700">
                        <div class="flex items-center gap-4"><i class="fa-solid fa-comments w-5 text-center"></i><span>Backchat</span></div>
                        <span class="text-xs bg-green-500/20 text-green-400 font-semibold px-2 py-0.5 rounded-full border border-green-500/30">New</span>
                    </a>
                    <a data-target="notary" class="sidebar-link flex items-center gap-4 py-2.5 px-4 rounded-lg transition-colors text-zinc-400 hover:text-white hover:bg-zinc-700">
                        <i class="fa-solid fa-stamp w-5 text-center"></i><span>Decentralized Notary</span>
                    </a>
                    <a data-target="airdrop" class="sidebar-link flex items-center gap-4 py-2.5 px-4 rounded-lg transition-colors text-zinc-400 hover:text-white hover:bg-zinc-700"><i class="fa-solid fa-parachute-box w-5 text-center"></i><span>Airdrop</span></a>
                    <a data-target="tokenomics" class="sidebar-link flex items-center gap-4 py-2.5 px-4 rounded-lg transition-colors text-zinc-400 hover:text-white hover:bg-zinc-700">
                        <i class="fa-solid fa-chart-line w-5 text-center"></i><span>Tokenomics</span>
                    </a>
                    
                    <a data-target="creditcard" class="sidebar-link flex items-center justify-between gap-4 py-2.5 px-4 rounded-lg transition-colors text-zinc-400 hover:text-white hover:bg-zinc-700">
                        <div class="flex items-center gap-4"><i class="fa-solid fa-credit-card w-5 text-center"></i><span>BKC Card</span></div>
                        <span class="text-xs bg-amber-500/20 text-amber-400 font-semibold px-2 py-0.5 rounded-full border border-amber-500/30">Demo</span>
                    </a>

                    <a data-target="dex" class="sidebar-link flex items-center justify-between gap-4 py-2.5 px-4 rounded-lg transition-colors text-zinc-400 hover:text-white hover:bg-zinc-700">
                        <div class="flex items-center gap-4"><i class="fa-solid fa-shuffle w-5 text-center"></i><span>DEX Swap</span></div>
                        <span class="text-xs bg-zinc-700 text-zinc-300 font-semibold px-2 py-0.5 rounded-full">Demo</span>
                    </a>

                    <a data-target="dao" class="sidebar-link flex items-center justify-between gap-4 py-2.5 px-4 rounded-lg transition-colors text-zinc-400 hover:text-white hover:bg-zinc-700">
                        <div class="flex items-center gap-4"><i class="fa-solid fa-landmark w-5 text-center"></i><span>DAO</span></div>
                        <span class="text-xs bg-zinc-700 text-zinc-300 font-semibold px-2 py-0.5 rounded-full">Demo</span>
                    </a>
                </div>

                <div id="admin-link-container" class="mt-4 pt-4 border-t border-zinc-700" style="display: none;"><a data-target="admin" id="admin-link" class="sidebar-link flex items-center gap-4 py-2.5 px-4 rounded-lg transition-colors text-red-400 hover:text-white hover:bg-red-500/50"><i class="fa-solid fa-user-shield w-5 text-center"></i><span>Admin Panel</span></a></div>

                <div class="mt-auto pt-4 border-t border-zinc-700 space-y-2">
                    <div class="px-4 pt-2 pb-4 text-center">
                        <div class="flex items-center justify-center gap-6">
                            <a href="https://x.com/backcoin" target="_blank" rel="noopener noreferrer" class="text-zinc-400 hover:text-white transition-colors text-xl" title="Twitter"><i class="fa-brands fa-twitter"></i></a>
                            <a href="https://web.telegram.org/k/#@BackCoinorg" target="_blank" rel="noopener noreferrer" class="text-zinc-400 hover:text-white transition-colors text-xl" title="Telegram"><i class="fa-brands fa-telegram"></i></a>
                            <a href="https://www.youtube.com/@Backcoin" target="_blank" rel="noopener noreferrer" class="text-zinc-400 hover:text-white transition-colors text-xl" title="YouTube"><i class="fa-brands fa-youtube"></i></a>
                            <a href="mailto:contact@backcoin.org" class="text-zinc-400 hover:text-amber-400 transition-colors text-xl" title="Contact Us"><i class="fa-solid fa-envelope"></i></a>
                        </div>
                    </div>
                    <a data-target="about" class="sidebar-link flex items-center gap-4 py-2.5 px-4 rounded-lg transition-colors text-amber-400 hover:text-amber-300 hover:bg-zinc-700"><i class="fa-solid fa-circle-info w-5 text-center"></i><span>About the Project</span></a>
                    <a href="mailto:contact@backcoin.org" class="flex items-center gap-4 py-2.5 px-4 rounded-lg transition-colors text-zinc-400 hover:text-white hover:bg-zinc-700"><i class="fa-solid fa-envelope w-5 text-center"></i><span>Contact Us</span></a>
                    <a href="#" id="shareProjectBtn" class="sidebar-link flex items-center gap-4 py-2.5 px-4 rounded-lg transition-colors text-zinc-400 hover:text-white hover:bg-zinc-700"><i class="fa-solid fa-share-nodes w-5 text-center"></i><span>Share Project</span></a>
                    <a data-target="tutorials" class="sidebar-link flex items-center gap-4 py-2.5 px-4 rounded-lg transition-colors text-cyan-400 hover:text-cyan-300 hover:bg-zinc-700"><i class="fa-solid fa-play-circle w-5 text-center"></i><span>Video Tutorials</span></a>
                    
                    <div class="mt-6 pt-4 border-t border-zinc-700/50 text-center pb-2">
                        <p class="text-[10px] uppercase tracking-widest text-zinc-600 font-bold mb-3">Powered By</p>
                        <div class="flex justify-center items-center gap-4">
                             <img src="./assets/icon_arbitrum.svg" class="h-5 w-auto opacity-50 hover:opacity-100 grayscale hover:grayscale-0 transition-all duration-300" title="Arbitrum One">
                             
                             <a href="https://www.alchemy.com/?r=b4b667087754b238" target="_blank" rel="noopener noreferrer">
                                <img src="./assets/alchemy.svg" class="h-5 w-auto opacity-50 hover:opacity-100 grayscale hover:grayscale-0 transition-all duration-300" title="Alchemy">
                             </a>
                             
                             <img src="./assets/metamask_icon.png" class="h-5 w-auto opacity-50 hover:opacity-100 grayscale hover:grayscale-0 transition-all duration-300" title="MetaMask">
                        </div>
                    </div>
                    </div>
            </nav>
        </aside>

        <div class="lg:ml-64 flex-1 flex flex-col min-h-screen">
            
            <header class="sticky top-0 z-20 flex justify-between items-center p-4 bg-sidebar/80 backdrop-blur-sm border-b border-border-color">
                <div class="flex items-center gap-3">
                    <button id="menu-btn" class="lg:hidden text-xl text-zinc-400 hover:text-white h-10 w-10"><i class="fa-solid fa-bars"></i></button>
                    <img src="./assets/bkc_logo_3d.png" alt="Backcoin.org Logo" class="h-8 w-auto rounded-full lg:hidden">
                    <span id="mobileAppDisplay" class="text-xl font-bold text-amber-400 lg:hidden">Backcoin.org</span>
                </div>
                
                <div class="flex items-center ml-auto gap-2 sm:gap-3">
                    <div id="desktop-connection-controls" class="hidden lg:flex items-center gap-3">
                        <button id="customBuyCryptoBtn" class="hidden items-center justify-center gap-2 rounded-md transition-colors text-sm bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4">
                            <i class="fa-solid fa-wallet"></i> Buy Crypto
                        </button>
                        <button id="connectButtonDesktop" class="wallet-btn wallet-btn-disconnected text-xs font-mono text-center max-w-fit whitespace-nowrap relative">
                            <i class="fa-solid fa-plug"></i> Connect Wallet
                        </button>
                    </div>
                    <div id="mobile-connection-controls" class="flex items-center lg:hidden gap-2">
                        <button id="customBuyCryptoBtnMobile" class="hidden items-center justify-center h-10 w-10 text-xl text-blue-400 hover:text-white"><i class="fa-solid fa-wallet"></i></button>
                        <button id="connectButtonMobile" class="wallet-btn wallet-btn-disconnected text-xs font-mono text-center max-w-fit whitespace-nowrap relative">
                            <i class="fa-solid fa-plug"></i> Connect
                        </button>
                    </div>
                </div>
            </header>
            
            <main class="flex-1 overflow-y-auto bg-main p-4 sm:p-6 lg:p-8">
                <div class="container mx-auto max-w-7xl">

                    <section id="dashboard" class=""> 
                        <div id="initial-loader-container" class="flex flex-col items-center justify-center min-h-[65vh] animate-fadeIn relative">
                            <div class="absolute inset-0 pointer-events-none flex items-center justify-center opacity-5">
                                <i class="fa-solid fa-gear text-[12rem] animate-construct-gear absolute top-0 left-0 text-zinc-500"></i>
                                <i class="fa-solid fa-gear text-[10rem] animate-construct-gear-rev absolute bottom-0 right-0 text-zinc-500"></i>
                            </div>
                            <div class="relative mb-10">
                                <div class="absolute inset-0 bg-amber-500 blur-3xl opacity-20 animate-pulse-slow rounded-full"></div>
                                <div class="relative z-20 animate-bounce-slow">
                                    <img src="./assets/bkc_logo_3d.png" class="w-32 h-32 object-contain filter drop-shadow-2xl" alt="Backchain Logo">
                                    <div class="absolute -right-6 -top-2 z-30 animate-construct-hammer origin-bottom-left">
                                        <i class="fa-solid fa-hammer text-3xl text-zinc-400 drop-shadow-lg"></i>
                                    </div>
                                    <div class="absolute -left-6 -bottom-2 z-30 animate-construct-hammer animation-delay-1000 origin-bottom-right">
                                        <i class="fa-solid fa-wrench text-3xl text-zinc-500 drop-shadow-lg"></i>
                                    </div>
                                </div>
                            </div>
                            <h2 class="text-2xl md:text-3xl font-bold text-white mb-3 tracking-tight font-display text-center">Building the Economy</h2>
                            <p id="loading-status-text" class="text-zinc-400 text-sm mb-8 font-mono h-6 text-center w-full max-w-md">Initializing protocol...</p>
                            <div class="w-64 md:w-80 h-2 bg-zinc-800 rounded-full overflow-hidden relative border border-zinc-700/50 shadow-inner">
                                <div id="loading-progress-bar" class="h-full bg-gradient-to-r from-amber-600 via-yellow-500 to-amber-600 bg-[length:200%_100%] animate-gradient-x rounded-full transition-all duration-300 ease-out" style="width: 0%"></div>
                            </div>
                            <div class="mt-3 flex items-center gap-2">
                                <span id="loading-percentage" class="text-amber-400 font-mono font-bold text-xl">0</span>
                                <span class="text-amber-500/80 text-sm font-bold">%</span>
                            </div>
                        </div>

                        <section class="partners-section">
                            <div class="container mx-auto">
                                <p class="partners-title">POWERED BY WORLD-CLASS INFRASTRUCTURE</p>
                                
                                <div class="partners-grid">
                                    <div class="partner-card">
                                        <img src="./assets/icon_arbitrum.svg" alt="Arbitrum One" class="partner-logo">
                                        <span class="partner-label">Arbitrum One</span>
                                    </div>

                                    <div class="partner-card highlight">
                                        <a href="https://www.alchemy.com/" target="_blank" rel="noopener noreferrer">
                                            <img src="./assets/alchemy.svg" alt="Powered by Alchemy" class="partner-logo">
                                        </a>
                                        <span class="partner-label">Alchemy</span>
                                    </div>

                                    <div class="partner-card">
                                        <img src="./assets/metamask_icon.png" alt="MetaMask Support" class="partner-logo">
                                        <span class="partner-label">MetaMask</span>
                                    </div>
                                </div>
                            </div>
                        </section>

                        <script>
                            (function() {
                                const bar = document.getElementById('loading-progress-bar');
                                const txt = document.getElementById('loading-percentage');
                                const status = document.getElementById('loading-status-text');
                                let progress = 0;
                                const messages = ["Establishing secure connection...", "Syncing block data...", "Loading market liquidity...", "Verifying smart contracts...", "Fetching user profile...", "Finalizing interface..."];
                                const interval = setInterval(() => {
                                    const increment = progress < 70 ? Math.random() * 3 : Math.random() * 1;
                                    progress += increment;
                                    if (progress > 99) progress = 99;
                                    if (bar && txt && status) {
                                        bar.style.width = `${progress}%`;
                                        txt.innerText = Math.floor(progress);
                                        const msgIndex = Math.floor((progress / 100) * messages.length);
                                        if (messages[msgIndex] && status.innerText !== messages[msgIndex]) status.innerText = messages[msgIndex];
                                    } else { clearInterval(interval); }
                                }, 80);
                            })();
                        </script>
                    </section>
                    
                    <section id="mine" class="hidden"></section>
                    <section id="store" class="hidden"></section>
                    <section id="rental" class="hidden"></section>
                    <section id="actions" class="hidden"></section>
                    <section id="charity" class="hidden"></section>
                    <section id="backchat" class="hidden"></section>
                    <section id="airdrop" class="hidden"></section>
                    <section id="notary" class="hidden"></section>
                    <section id="tokenomics" class="hidden"></section>
                    <section id="faucet" class="hidden"></section>
                    <section id="about" class="hidden"></section>
                    <section id="admin" class="hidden"></section>
                    <section id="socials" class="hidden"></section>
                    <section id="tutorials" class="hidden"></section>
                    
                    <section id="creditcard" class="hidden"></section>
                    <section id="dex" class="hidden"></section>
                    <section id="dao" class="hidden"></section>

                </div>
            </main>
        </div>
    </div>
    <div id="modal-container"></div>
    <script type="module" src="./app.js"></script>
    <script>
        // Admin link visibility - usa variável global definida pelo app.js
        let lastCheckedAddress = null;
        
        function checkAdminVisibility() {
            const adminContainer = document.getElementById('admin-link-container');
            if (!adminContainer) return;
            
            const connectedAddress = window.State?.userAddress || 
                                    window.ethereum?.selectedAddress ||
                                    localStorage.getItem('connectedAddress');
            
            // Evita verificações repetidas
            const adminWallet = window.__ADMIN_WALLET__ || "";
            const checkKey = `${connectedAddress}-${adminWallet}`;
            if (checkKey === lastCheckedAddress) return;
            lastCheckedAddress = checkKey;
            
            if (adminWallet && connectedAddress && connectedAddress.toLowerCase() === adminWallet.toLowerCase()) {
                adminContainer.style.display = 'block';
            } else {
                adminContainer.style.display = 'none';
            }
        }
        
        // Verifica periodicamente (app.js define __ADMIN_WALLET__ ao carregar)
        document.addEventListener('DOMContentLoaded', () => {
            setTimeout(checkAdminVisibility, 1000);
            setInterval(checkAdminVisibility, 2000);
        });
        
        // Escuta mudanças na carteira
        if (window.ethereum) {
            window.ethereum.on('accountsChanged', checkAdminVisibility);
        }
    </script>
</body>
</html>