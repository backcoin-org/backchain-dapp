import{a as i,b as d}from"./bignumber-D7CEMWOK.js";const g=n=>class extends n{async createTx(t,r,e){const s=this.w3signer,a={to:r,from:this.address,value:t.toString(),gasLimit:BigInt(0)},c=await this.provider.estimateGas(a);return a.gasLimit=c,{tx:await s.populateTransaction(a),txId:void 0}}async getTx(t){const e=await this.provider.getTransaction(t);if(!e)throw new Error("Tx doesn't exist");if(!e.to)throw new Error(`Unable to resolve transactions ${t} receiver`);return{from:e.from,to:e.to,blockHeight:e.blockNumber?new i(e.blockNumber):void 0,amount:new i(e.value.toString()),pending:!e.blockNumber,confirmed:await e.confirmations()>=this.minConfirm}}async getFee(t,r){const e=this.providerInstance,s={to:r,from:this.address,value:"0x"+new i(t).toString(16)},a=await e.estimateGas(s),c=await e.getGasPrice();return new i(c.mul(a).toString())}async ready(){const t=this.wallet;this.provider=t;const r=await t.getSigner();r._signTypedData=async(e,s,a)=>r.signTypedData(e,s,a),t.getSigner=()=>r,this.wallet=t,t.getGasPrice=async()=>t.getFeeData().then(e=>d.from(e.gasPrice??0)),this.providerInstance=t,await super.ready()}};function h(n){return{phase:"pre",adaptTokenPre(o,t){o.withProvider(n),o.token=g(t)}}}export{h as EthersV6Adapter,h as default};
